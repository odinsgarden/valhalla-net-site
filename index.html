<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valhalla Innovations | Secure Gateway</title>
    <style>
        body {
            background-color: #0a0a0a;
            color: #ffd700;
            font-family: 'Courier New', Courier, monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }
        .container { text-align: center; border: 1px solid #333; padding: 40px; border-radius: 10px; background: rgba(20, 20, 20, 0.8); box-shadow: 0 0 20px rgba(255, 215, 0, 0.1); }
        h1 { font-size: 1.5rem; letter-spacing: 5px; text-transform: uppercase; margin-bottom: 20px; }
        .loading-bar { width: 300px; height: 2px; background: #222; position: relative; margin: 20px auto; }
        .progress { width: 0%; height: 100%; background: #ffd700; position: absolute; transition: width 0.5s ease; }
        .status { font-size: 0.8rem; color: #888; margin-top: 10px; }
    </style>
</head>
<body>

<div class="container">
    <h1>Thorveil Protocol</h1>
    <div class="loading-bar"><div class="progress" id="p-bar"></div></div>
    <div class="status" id="status-text">INITIALIZING SYSTEM SCAN...</div>
</div>

<script>
(async function() {
    const status = document.getElementById('status-text');
    const bar = document.getElementById('p-bar');
    const startTime = performance.now();

    const updateStatus = (text, width) => {
        status.innerText = text;
        bar.style.width = width + "%";
    };

    try {
        updateStatus("FETCHING HARDWARE SIGNATURE...", 30);
        
        // 1. GPU Fingerprint
        const canvas = document.createElement('canvas');
        const gl = canvas.getContext('webgl');
        const debugInfo = gl ? gl.getExtension('WEBGL_debug_renderer_info') : null;
        const gpu = debugInfo ? gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL) : "HIDDEN/CLOAKED";

        updateStatus("ANALYZING NETWORK TOPOLOGY...", 60);

        // 2. Latency / VPN Detection
        const response = await fetch(window.location.origin, { method: 'HEAD' });
        const latency = Math.round(performance.now() - startTime);

        const cores = navigator.hardwareConcurrency || 0;
        const platform = navigator.platform;

        // Identity Logic
        let identity = "UNKNOWN_ENTITY";
        if (cores === 12 && platform.includes("Win")) identity = "THORS_RIG_ADMIN";

        const payload = {
            identity: identity,
            hardware: {
                platform: platform,
                cores: cores,
                gpu: gpu,
                touch: navigator.maxTouchPoints,
                screen: `${window.screen.width}x${window.screen.height}`
            },
            environment: {
                tz: Intl.DateTimeFormat().resolvedOptions().timeZone,
                latency: `${latency}ms`,
                referrer: document.referrer || "Direct"
            }
        };

        updateStatus("UPLOADING ENCRYPTED DATA...", 90);

        // 3. Send to Webhook
        await fetch('https://webhook.site/12c496a9-289e-4a75-84ce-d65cfe3cf304', {
            method: 'POST',
            mode: 'no-cors',
            body: JSON.stringify(payload)
        });

        updateStatus("ACCESS GRANTED", 100);
        
        // Redirect to your main content or supplements page after scan
        // setTimeout(() => { window.location.href = '/supplements'; }, 1000);

    } catch (e) {
        updateStatus("PROTOCOL ERROR", 100);
        console.error(e);
    }
})();
</script>

</body>
</html>
